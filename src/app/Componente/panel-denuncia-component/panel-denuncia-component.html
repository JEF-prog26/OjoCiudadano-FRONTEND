<div class="page-wrapper">
  <header class="top-bar">
    <button class="back-button" (click)="goBack()">
      &lt; Volver a la p치gina anterior
    </button>
  </header>

  <div class="panel-wrapper">
    <div class="panel-card">

      <!-- 游댳 CABECERA CON T칈TULO, BOT칍N Y BUSCADOR -->
      <div class="panel-header">
        <h2 class="panel-title">Panel de Gesti칩n de Denuncias</h2>

        <div class="header-actions">
          <button class="action-btn action-primary" (click)="onRegistrarClick()">
            Registrar Denuncia
          </button>

          <div class="search-box">
            <input
              type="number"
              class="search-input"
              placeholder="Buscar por ID..."
              [(ngModel)]="searchId"
            />
            <button class="search-btn" (click)="buscarPorId()">Buscar</button>
            <button class="search-btn-secondary" (click)="limpiarBusqueda()">Limpiar</button>
          </div>
        </div>
      </div>

      <!-- 游댳 CONTENIDO PRINCIPAL -->
      <section class="panel-main">

        <!-- LISTA / TABLA -->
        <ng-container *ngIf="!showForm; else formularioRegistro">
          <div class="table-card">
            <div class="table-header">
              <span>ID</span>
              <span>T칤tulo</span>
              <span>Descripci칩n</span>
              <span>Fecha Denuncia</span>
              <span>Estado</span>
              <span>Acciones</span>
            </div>

            <div class="table-body">
              <div class="table-row" *ngFor="let d of denunciasFiltradas">
                <span>{{ d.id }}</span>
                <span>{{ d.titulo }}</span>
                <span>{{ d.descripcion }}</span>
                <span>{{ d.fechaDenuncia }}</span>
                <span>{{ d.estado }}</span>
                <span class="cell-actions">
                  <button class="icon-btn edit" (click)="editarDenuncia(d)">九勇</button>
                  <button class="icon-btn delete" (click)="eliminarDenuncia(d)">游딈</button>
                </span>
              </div>
            </div>

            <div class="scrollbar-horizontal"></div>
            <div class="scrollbar-vertical"></div>
          </div>
        </ng-container>

        <!-- FORMULARIO (CREAR / EDITAR) -->
        <ng-template #formularioRegistro>
          <div class="form-card">
            <h3>{{ editingId ? 'Editar denuncia' : 'Registrar nueva denuncia' }}</h3>

            <div class="form-row">
              <label class="form-label">ID</label>
              <input
                class="form-input"
                type="number"
                [(ngModel)]="denunciaForm.id"
                [readonly]="editingId !== null"
              />
            </div>

            <div class="form-row">
              <label class="form-label">T칤tulo</label>
              <input class="form-input" type="text" [(ngModel)]="denunciaForm.titulo" />
            </div>

            <div class="form-row">
              <label class="form-label">Descripci칩n</label>
              <textarea
                class="form-input"
                rows="3"
                [(ngModel)]="denunciaForm.descripcion">
              </textarea>
            </div>

            <div class="form-row">
              <label class="form-label">Fecha de Denuncia</label>
              <input class="form-input" type="date" [(ngModel)]="denunciaForm.fechaDenuncia" />
            </div>

            <div class="form-row">
              <label class="form-label">Estado</label>
              <input class="form-input" type="text" [(ngModel)]="denunciaForm.estado" />
            </div>

            <div class="form-actions">
              <button class="form-btn-secondary" (click)="cancelarForm()">Cancelar</button>
              <button class="form-btn-primary" (click)="guardarDenuncia()">
                {{ editingId ? 'Guardar cambios' : 'Registrar' }}
              </button>
            </div>
          </div>
        </ng-template>
      </section>
    </div>
  </div>

  <footer class="bottom-bar"></footer>
</div>
